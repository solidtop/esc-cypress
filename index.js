(()=>{"use strict";var e,t,n,a,o={707:(e,t,n)=>{function a(e){let t,n,a;"online"===e.type?(t="fa-solid fa-laptop",n="Take challenge online",a="(online)"):(t="fa-sharp fa-solid fa-house",n="Book this room",a="(on-site)");const o=document.createElement("li");o.classList.add("challenge-item");const c=document.createElement("i");c.setAttribute("class",t+" challenge-image-icon"),o.appendChild(c);const i=document.createElement("img");i.classList.add("challenge-image"),i.src=e.image,i.alt="challenge image",o.appendChild(i);const r=document.createElement("h3");r.classList.add("challenge-title"),r.textContent=`${e.title} ${a}`,o.appendChild(r);const l=document.createElement("ul");l.classList.add("rating"),l.setAttribute("role","meter"),l.setAttribute("aria-label","rating"),l.setAttribute("arial-valuemin","0"),l.setAttribute("aria-valuemax","5"),l.setAttribute("aria-valuenow",e.rating),l.setAttribute("aria-valuetext",e.rating+" out of 5"),o.appendChild(l);const s=Math.floor(e.rating);for(let e=0;e<5;e++){let t=document.createElement("li");t.classList.add("rating-star"),e<s&&t.classList.add("active"),l.appendChild(t)}const d=document.createElement("small");d.classList.add("challenge-meta"),d.textContent=`${e.minParticipants}-${e.maxParticipants} participants`,o.appendChild(d);const u=document.createElement("p");u.classList.add("challenge-description"),u.textContent=e.description,u.textContent.length<50||(u.textContent=u.textContent.substring(0,50)+"..."),o.appendChild(u);const m=document.createElement("input");m.setAttribute("hidden","true"),m.setAttribute("value",JSON.stringify(e));const p=document.createElement("button");return p.classList.add("button","primary"),p.textContent=n,p.append(m),o.appendChild(p),function(e){e.classList.add("loading");const t=document.createElement("div");t.classList.add("lds-ring"),e.append(t);for(let e=0;e<5;e++){const e=document.createElement("div");t.append(e)}}(o),i.onload=()=>function(e){e.classList.remove("loading"),e.querySelector(".lds-ring").remove()}(o),o}n.d(t,{Z:()=>a})},657:(e,t,n)=>{async function a(e){return(await e).sort((function(e,t){return t.rating-e.rating})).slice(0,3)}n.d(t,{Z:()=>a})},631:(e,t,n)=>{async function a(){const e=await fetch("https://lernia-sjj-assignments.vercel.app/api/challenges");return(await e.json()).challenges}n.d(t,{Z:()=>a})},586:(e,t,n)=>{function a(e){e.target.classList.contains("modal-container")&&!e.target.classList.contains("button")&&o()}function o(){document.body.removeEventListener("click",a),document.querySelector(".modal-container").remove()}async function c(e){const t=document.querySelector(".modal-container");t.innerHTML="",t.appendChild(await e)}function i(){document.querySelectorAll(".challenge-item button").forEach((e=>{e.addEventListener("click",(()=>{!function(e){const t=document.createElement("div");t.classList.add("modal-container"),document.body.appendChild(t),c(async function(e){const t=document.createElement("form");t.classList.add("modal-content");const n=document.createElement("h1");n.textContent=`Book room ${e.title} (step 1)`,t.appendChild(n);const a=document.createElement("p");a.textContent="What date would you like to come?",t.appendChild(a);const i=document.createElement("label");i.textContent="Date",i.for="input[type=date]",t.appendChild(i);const r=document.createElement("input");r.type="date",r.setAttribute("min",(new Date).toLocaleDateString()),t.appendChild(r);const l=document.createElement("button");return l.type="submit",l.classList.add("button","primary"),l.name="search-times",l.textContent="Search available times",t.appendChild(l),t.addEventListener("submit",(async t=>{t.preventDefault();const n=r.value;if(""===r.value)alert("Please choose a date");else{const t=await async function(e,t){const n=await fetch("https://lernia-sjj-assignments.vercel.app/api/booking/available-times?date="+t+"&challenge="+e);return await n.json()}(e.id,n);c(async function(e,t){const n=document.createElement("form");n.classList.add("modal-content");const a=document.createElement("h1");a.textContent=`Book room ${e.title} (step 2)`,n.appendChild(a);const i=document.createElement("label");i.textContent="Name",i.for="input-name",n.appendChild(i);const r=document.createElement("input");r.type="text",r.setAttribute("required","true"),r.classList.add("input-name"),n.appendChild(r);const l=document.createElement("label");l.textContent="E-mail",l.for="input-email",n.appendChild(l);const s=document.createElement("input");s.type="email",s.setAttribute("required","true"),s.classList.add("input-email"),n.appendChild(s);const d=document.createElement("label");d.textContent="Phone number",d.for="input-phone",n.appendChild(d);const u=document.createElement("input");u.type="tel",u.setAttribute("required","true"),u.classList.add("input-phone"),n.appendChild(u);const m=document.createElement("label");m.textContent="What time?",l.for="select-time",n.appendChild(m);const p=document.createElement("select");p.classList.add("select-time");const h=document.createElement("option");h.textContent="-- Choose time --",p.appendChild(h),n.appendChild(p);for(let e=0;e<t.slots.length;e++){const n=document.createElement("option");n.textContent=t.slots[e],p.appendChild(n)}const b=document.createElement("label");b.textContent="How many participants?",b.for="select-participants",n.appendChild(b);const f=document.createElement("input");f.classList.add("select-participants"),f.type="number",f.min=e.minParticipants,f.max=e.maxParticipants,f.value=e.minParticipants,f.required=!0,n.appendChild(f);const y=document.createElement("button");return y.type="submit",y.classList.add("button","primary"),y.name="submit-booking",y.textContent="Submit booking",n.appendChild(y),n.addEventListener("submit",(async n=>{n.preventDefault();let a=document.querySelector(".input-name").value,i=document.querySelector(".input-email").value,r=document.querySelector(".input-phone").value,l=document.querySelector(".select-participants").value,s=document.querySelector(".select-time").value,d=t.date,u=e.id,m=l.match(/(\d+)/);r.match(/^(\+{0,})(\d{0,})([(]{1}\d{1,3}[)]{0,}){0,}(\s?\d+|\+\d{2,3}\s{1}\d+|\d+){1}[\s|-]?\d+([\s|-]?\d+){1,2}(\s){0,}$/gm)||alert("Wrongly putten phone number pleas try again."),"-- Select number --"===l?alert("Please select participants."):"-- Choose time --"===s?alert("Please choose time."):(l=parseInt(m[0]),await async function(e,t,n,a,o,c,i){const r=await fetch("https://lernia-sjj-assignments.vercel.app/api/booking/reservations",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({challenge:e,name:t,email:n,phone:a,date:o,time:c,participants:i})}),l=await r.json();console.log(l)}(u,a,i,r,d,s,l),c(function(){const e=document.createElement("div");e.classList.add("modal-content","center");const t=document.createElement("h1");t.textContent="Thank you!",e.appendChild(t);const n=document.createElement("button");return n.classList.add("button","secondary"),n.textContent="Back to challenges",n.addEventListener("click",o),e.appendChild(n),e}()))})),n}(e,t))}})),t}(e)),document.body.addEventListener("click",a)}(JSON.parse(e.querySelector("input").value))}))}))}n.d(t,{aC:()=>i})},555:(e,t,n)=>{async function a(e,t=function(e){return e},n,a){let o=await e;o=await t(o),o.forEach((e=>{const t=n(e);a.append(t)}))}n.d(t,{r:()=>a})},719:(e,t,n)=>{n.a(e,(async(e,t)=>{try{var a=n(631),o=n(657),c=n(707),i=n(555),r=n(586);let e=await(0,a.Z)();await(0,i.r)(e,o.Z,c.Z,document.querySelector(".challenge-list")),(0,r.aC)(),document.querySelector(".main-nav-toggle").addEventListener("click",(()=>{document.querySelector(".main-nav").classList.toggle("open")})),t()}catch(e){t(e)}}),1)}},c={};function i(e){var t=c[e];if(void 0!==t)return t.exports;var n=c[e]={exports:{}};return o[e](n,n.exports,i),n.exports}e="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",t="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",n="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",a=e=>{e&&!e.d&&(e.d=1,e.forEach((e=>e.r--)),e.forEach((e=>e.r--?e.r++:e())))},i.a=(o,c,i)=>{var r;i&&((r=[]).d=1);var l,s,d,u=new Set,m=o.exports,p=new Promise(((e,t)=>{d=t,s=e}));p[t]=m,p[e]=e=>(r&&e(r),u.forEach(e),p.catch((e=>{}))),o.exports=p,c((o=>{var c;l=(o=>o.map((o=>{if(null!==o&&"object"==typeof o){if(o[e])return o;if(o.then){var c=[];c.d=0,o.then((e=>{i[t]=e,a(c)}),(e=>{i[n]=e,a(c)}));var i={};return i[e]=e=>e(c),i}}var r={};return r[e]=e=>{},r[t]=o,r})))(o);var i=()=>l.map((e=>{if(e[n])throw e[n];return e[t]})),s=new Promise((t=>{(c=()=>t(i)).r=0;var n=e=>e!==r&&!u.has(e)&&(u.add(e),e&&!e.d&&(c.r++,e.push(c)));l.map((t=>t[e](n)))}));return c.r?s:i()}),(e=>(e?d(p[n]=e):s(m),a(r)))),r&&(r.d=0)},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i(719)})();